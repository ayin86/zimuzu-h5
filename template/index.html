<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>首页</title>
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<script src="../lib/init/loadFiles.js"></script>
</head>
<style>test{}</style>
<body>
    <div id="offCanvasWrapper" class="mui-off-canvas-wrap mui-draggable">
        <!--侧滑菜单部分-->
        <aside id="offCanvasSide" class="mui-off-canvas-left side-menu-wrap">
            <div id="offCanvasSideScroll" class="mui-scroll-wrapper">
                <div class="mui-scroll">
                    <ul class="block-group side-btn">
                        <li><a class="mui-btn mui-btn-primary" href="login.html">登录</a></li>
                        <li><a class="mui-btn mui-btn-primary" href="register.html">注册</a></li>
                    </ul>
                    
                    <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted side-menu">
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navHome"><i class="fa fa-home"></i>首页</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navFilm"><i class="fa fa-film"></i>最新</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navDisc"><i class="fa fa-compass"></i>发现</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navFav"><i class="fa fa-star"></i>收藏</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navPers"><i class="fa fa-user"></i>我的</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" id="navAbout"><i class="fa fa-bookmark"></i>关于</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="side-fotter-info">人人影视旗下产品</div>
        </aside>
        <!--主界面部分-->
        <div class="mui-inner-wrap">
            <header class="mui-bar mui-bar-nav">
                <a href="#offCanvasSide" class="mui-icon mui-action-menu mui-icon-bars mui-pull-left"></a>
                <a class=" mui-icon mui-action-menu  mui-icon-search  mui-pull-right"></a>
                <h1 class="mui-title">首页</h1>
            </header>
            
            <div class="mui-off-canvas-backdrop"></div><!-- off-canvas backdrop -->
        </div>
    </div>
    
</body>
</html>
<script src="../lib/init/loadFiles-after.js"></script>
<script>
//navHome navFilm navDisc navFav navPers navAbout
document.querySelector('#offCanvasSide').addEventListener('tap',function(){mui('#offCanvasWrapper').offCanvas('close');});
document.querySelector('#navHome').addEventListener('tap',function(){navHome();});
document.querySelector('#navFilm').addEventListener('tap',function(){navFilm();});
document.querySelector('#navDisc').addEventListener('tap',function(){navDisc();});
document.querySelector('#navFav').addEventListener('tap',function(){navFav();});
function cleanMuiCont(name){
    $(".mui-title").html(name);
    $(".mui-content").remove();
}
function navHome(){
    var name="首页";
    cleanMuiCont(name);
    $.ajax({
        url: "index-home.html", 
        type: "GET", 
        dataType:"html",
        success: function(data){
            var Obj = $("<code></code>").append($(data));//包装数据  
            var html = $(".mui-content", Obj);
            $(".mui-inner-wrap").append(html);
            
            function cloneslideimg(){
                var parent=$(".aui-slider .mui-slider-group");
                parent.addClass("alreadyClone");
                parent.append(parent.find(".mui-slider-item:first").clone());
                parent.prepend(parent.find(".mui-slider-item:last").prev().clone());
            }
            //cloneslideimg();
            document.querySelector('.mui-slider').addEventListener('load', function(event) {
              //图片滑动时的监听事件
            });
            
            mui("#slider").slider({interval: 2000},cloneslideimg());//slider加载时候之下cloneslideimg事件，完成图片补充
            
            mui('.play-list-wrap').scroll({
             scrollY: false, //是否竖向滚动
             scrollX: true, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
            mui('.main-scroll').scroll({
             scrollY: true, //是否竖向滚动
             scrollX: false, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
        }
    });
}


function navFilm(){
    var name="最新";
    cleanMuiCont(name);
    $.ajax({
        url: "index-film.html", 
        type: "GET", 
        dataType:"html",
        success: function(data){
            var Obj = $("<code></code>").append($(data));//包装数据  
            var html = $(".mui-content", Obj);
            $(".mui-inner-wrap").append(html);
            
            mui('.main-scroll').scroll({
             scrollY: true, //是否竖向滚动
             scrollX: false, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
        }
    });
}

function navDisc(){
    var name="发现";
    cleanMuiCont(name);
    $.ajax({
        url: "index-disc.html", 
        type: "GET", 
        dataType:"html",
        success: function(data){
            var Obj = $("<code></code>").append($(data));//包装数据  
            var html = $(".mui-content", Obj);
            $(".mui-inner-wrap").append(html);
            document.querySelector('.pic-list-h li .fav').addEventListener('tap',function(){
                
            });
            
            mui(".pic-list-h li").on('tap','.fav',function(){
               if($(this).hasClass("active")){
                    $(this).removeClass("active");//已收藏
                }else{
                    $(this).addClass("active");//未收藏
                }
            }) 
            
            mui('.play-list-wrap').scroll({
             scrollY: false, //是否竖向滚动
             scrollX: true, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
            mui('.main-scroll').scroll({
             scrollY: true, //是否竖向滚动
             scrollX: false, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
        }
    });
}

function navFav(){
    var name="收藏";
    cleanMuiCont(name);
    $.ajax({
        url: "index-fav.html", 
        type: "GET", 
        dataType:"html",
        success: function(data){
            var Obj = $("<code></code>").append($(data));//包装数据  
            var html = $(".mui-content", Obj);
            $(".mui-inner-wrap").append(html);
            //$(".mui-segmented-control").append(".mui-title");
            var tab=$(html).find(".mui-segmented-control");
            $(".mui-title").empty().append(tab);
            
            mui(".pic-list li").on('tap','.fav',function(){
               if($(this).hasClass("active")){
                    $(this).removeClass("active");//已收藏
                }else{
                    $(this).addClass("active");//未收藏
                }
            }) 
            
            mui('.main-scroll').scroll({
             scrollY: true, //是否竖向滚动
             scrollX: false, //是否横向滚动
             indicators: false, //是否显示滚动条
             deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
             bounce: true //是否启用回弹
            });
        }
    });
}
navFav();
</script>

